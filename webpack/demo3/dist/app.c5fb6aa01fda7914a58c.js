!function(t){function e(e){for(var o,a,i=e[0],l=e[1],c=e[2],u=0,f=[];u<i.length;u++)a=i[u],n[a]&&f.push(n[a][0]),n[a]=0;for(o in l)Object.prototype.hasOwnProperty.call(l,o)&&(t[o]=l[o]);for(h&&h(e);f.length;)f.shift()();return s.push.apply(s,c||[]),r()}function r(){for(var t,e=0;e<s.length;e++){for(var r=s[e],o=!0,i=1;i<r.length;i++){var l=r[i];0!==n[l]&&(o=!1)}o&&(s.splice(e--,1),t=a(a.s=r[0]))}return t}var o={},n={1:0},s=[];function a(e){if(o[e])return o[e].exports;var r=o[e]={i:e,l:!1,exports:{}};return t[e].call(r.exports,r,r.exports,a),r.l=!0,r.exports}a.m=t,a.c=o,a.d=function(t,e,r){a.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:r})},a.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},a.t=function(t,e){if(1&e&&(t=a(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var r=Object.create(null);if(a.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var o in t)a.d(r,o,function(e){return t[e]}.bind(null,o));return r},a.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return a.d(e,"a",e),e},a.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},a.p="";var i=window.webpackJsonp=window.webpackJsonp||[],l=i.push.bind(i);i.push=e,i=i.slice();for(var c=0;c<i.length;c++)e(i[c]);var h=l;s.push([2,0]),r()}([,function(t,e){const r={makeRow(t=0){const e=new Array(9);return e.fill(t),e},makeMatrix(t=0){return Array.from({length:9},()=>this.makeRow(t))},shuffle(t){const e=t.length-1;for(let r=0;r<=e;r++){const e=r+Math.floor(Math.random()*(t.length-r));[t[r],t[e]]=[t[e],t[r]]}return t},checkFillable(t,e,r,n){const s=t[r],a=this.makeRow().map((e,r)=>t[r][n]),{boxIndex:i}=o.converToBoxIndex(r,n),l=o.getBoxCells(t,i);for(let t=0;t<9;t++)if(s[t]===e||a[t]===e||l[t]===e)return!1;return!0}},o={getBoxCells(t,e){const r=3*Math.floor(e/3),o=e%3*3,n=[];for(let e=0;e<9;e++){const s=r+Math.floor(e/3),a=o+e%3;n.push(t[s][a])}return n},converToBoxIndex:(t,e)=>({boxIndex:3*Math.floor(t/3)+Math.floor(e/3),cellIndex:t%3*3+e%3}),convertFromBoxIndex:(t,e)=>({colIndex:t%3*3+e%3,rowIndex:3*Math.floor(t/3)+Math.floor(e/3)})};t.exports=class{static get matrix(){return r}static get box(){return o}}},function(t,e,r){(function(t){const e=r(3),o=r(7);r(8);const n=new e(t("#container"));n.build(),n.layout();const s=new o(t("#popupNumbers"));n.bindPopup(s),t("#check").on("click",t=>{n.check()&&alert("恭喜！解谜成功！")}),t("#reset").on("click",t=>{n.reset()}),t("#clear").on("click",t=>{n.clear()}),t("#rebuild").on("click",t=>{n.rebuild()})}).call(this,r(0))},function(t,e,r){(function(e){const o=r(4),n=r(6);t.exports=class{constructor(t){this._$container=t}build(){const t=new o;t.make(),console.log("答案：",t.solutionMatrix);const r=t.puzzleMatrix,n=["row_g_top","row_g_middle","row_g_bottom"],s=["col_g_left","col_g_center","col_g_right"],a=r.map(t=>t.map((t,r)=>e("<span>").addClass(s[r%3]).addClass(t?"fixed":"empty").text(t))).map((t,r)=>e("<div />").addClass("row").addClass(n[r%3]).append(t));this._$container.append(a)}layout(){const t=e("span:first",this._$container).width();e("span",this._$container).height(t).css({"line-height":`${t}px`,"font-size":t<32?`${t/2}px`:""})}check(){const t=this._$container.children().map((t,r)=>e(r).children().map((t,r)=>parseInt(e(r).text())||0)).toArray().map(t=>t.toArray()),r=new n(t);if(r.check())return!0;const o=r.matrixMarks;this._$container.children().each((t,r)=>{e(r).children().each((r,n)=>{const s=e(n);s.is(".fixed")||o[t][r]?s.removeClass("error"):s.addClass("error")})})}reset(){this._$container.find("span:not(.fixed)").removeClass("error mark1 mark2").addClass("empty").text(0)}clear(){this._$container.find("span.error").removeClass("error")}rebuild(){this._$container.empty(),this.build(),this.layout()}bindPopup(t){this._$container.on("click","span",r=>{const o=e(r.target);o.is(".fixed")||t.popup(o)})}}}).call(this,r(0))},function(t,e,r){const o=r(5);t.exports=class{constructor(){const t=new o;t.generate(),this.solutionMatrix=t.matrix}make(t=5){this.puzzleMatrix=this.solutionMatrix.map(e=>e.map(e=>9*Math.random()<t?0:e))}}},function(t,e,r){const o=r(1);t.exports=class{generate(){for(;!this.internalGenerate();)console.warn("try again")}internalGenerate(){this.matrix=o.matrix.makeMatrix(),this.orders=o.matrix.makeMatrix().map(t=>t.map((t,e)=>e)).map(t=>o.matrix.shuffle(t));for(let t=1;t<=9;t++)if(!this.fillNumber(t))return!1;return!0}fillNumber(t){return this.fillRow(t,0)}fillRow(t,e){if(e>8)return!0;const r=this.matrix[e],n=this.orders[e];for(let s=0;s<9;s++){const a=n[s];if(!r[a]&&o.matrix.checkFillable(this.matrix,t,e,a)){if(r[a]=t,this.fillRow(t,e+1))return!0;r[a]=0}}return!1}}},function(t,e,r){function o(t){const e=t.length,r=new Array(e);r.fill(!0);for(let o=0;o<e-1;o++){if(!r[o])continue;const n=t[o];if(n)for(let s=o+1;s<e;s++)n===t[s]&&(r[o]=r[s]=!1);else r[o]=!1}return r}const n=r(1);t.exports=class{constructor(t){this._matrix=t,this._matrixMarks=n.matrix.makeMatrix(!0)}get matrixMarks(){return this._matrixMarks}get isSuccess(){return this._success}check(){return this.checkRows(),this.checkCols(),this.checkBoxes(),this._success=this._matrixMarks.every(t=>t.every(t=>t)),this._success}checkRows(){for(let t=0;t<9;t++){const e=o(this._matrix[t]);for(let r=0;r<e.length;r++)e[r]||(this._matrixMarks[t][r]=!1)}}checkCols(){for(let t=0;t<9;t++){const e=[];for(let r=0;r<9;r++)e[r]=this._matrix[r][t];const r=o(e);for(let e=0;e<r.length;e++)r[e]||(this._matrixMarks[e][t]=!1)}}checkBoxes(){for(let t=0;t<9;t++){const e=o(n.box.getBoxCells(this._matrix,t));for(let r=0;r<9;r++)if(!e[r]){const{rowIndex:e,colIndex:o}=n.box.convertFromBoxIndex(t,r);this._matrixMarks[e][o]=!1}}}}},function(t,e,r){(function(e){t.exports=class{constructor(t){this._$panel=t.hide().removeClass("hidden"),this._$panel.on("click","span",t=>{const r=this._$targetCell,o=e(t.target);o.hasClass("mark1")?r.hasClass("mark1")?r.removeClass("mark1"):r.removeClass("mark2").addClass("mark1"):o.hasClass("mark2")?r.hasClass("mark2")?r.removeClass("mark2"):r.removeClass("mark1").addClass("mark2"):o.hasClass("empty")?r.text(0).addClass("empty"):r.removeClass("empty").text(o.text()),this.hide()})}popup(t){this._$targetCell=t;const{left:e,top:r}=t.position();this._$panel.css({left:`${e}px`,top:`${r}px`}).show()}hide(){this._$panel.hide()}}}).call(this,r(0))},function(t,e,r){}]);